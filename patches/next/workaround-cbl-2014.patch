From 7fff6119df84de4336e983d58f5e894206bc8d4d Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <nathan@kernel.org>
Date: Wed, 10 Apr 2024 09:11:15 -0700
Subject: [PATCH] Temporary hack for
 https://github.com/ClangBuiltLinux/linux/issues/2014

---
 drivers/media/platform/mediatek/vcodec/decoder/Makefile | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/drivers/media/platform/mediatek/vcodec/decoder/Makefile b/drivers/media/platform/mediatek/vcodec/decoder/Makefile
index 904cd22def84..e732e526d06c 100644
--- a/drivers/media/platform/mediatek/vcodec/decoder/Makefile
+++ b/drivers/media/platform/mediatek/vcodec/decoder/Makefile
@@ -22,4 +22,9 @@ mtk-vcodec-dec-y := vdec/vdec_h264_if.o \
 		mtk_vcodec_dec_stateless.o \
 		mtk_vcodec_dec_pm.o \
 
+# https://github.com/ClangBuiltLinux/linux/issues/2014
+ifeq ($(CONFIG_LOONGARCH)$(CONFIG_ARCH_STRICT_ALIGN)$(CONFIG_UBSAN_ARRAY_BOUNDS)$(call clang-min-version, 190000),yyyy)
+UBSAN_SANITIZE_vdec/vdec_vp9_req_lat_if.o := n
+endif
+
 mtk-vcodec-dec-hw-y := mtk_vcodec_dec_hw.o
-- 
2.44.0

